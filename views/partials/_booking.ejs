<section class="classroom-booking-section">
    <div class="blackboard"></div>
    <div class="book-seat">
        <div class="seating-area">
          <div class="row">
        </div>
    </div>
  </section>

  <script>

    // dynamically creating seats
    // let initial seat number
    let seatNumber = 1;
    // for booked seat number
    // const bookedSeats = [1 , 5, 10 , 12];
    let selectedSeat = null;
    
    function initBookingPage() {
      const defaultData = {
    totalSeats: 36,
    availableSeats: 36,
    bookedSeats: [],
    selectedSeat: 0,
  };

      setupClassroom(totalSeats=36 , seatsPerRow=8 , defaultData);

    // for selecting and deselecting seats
    const seats = document.querySelectorAll('.seat');
// add event listeners for each seat
  Array.from(seats).forEach((seat) => {
    seat.addEventListener('click', function () {
        // definimg select seat function
      selectSeat(seat);

      // for modal
      selectedSeatNumber = seat.getAttribute("data-seat-number");
      modalText.textContent = `Do you want to book Seat-${selectedSeatNumber} ?`;
      document.getElementById("seatInput").value = selectedSeatNumber;
      openModal();

    });
  });
   } 


   function setupClassroom(totalSeats , seatsPerRow , data){
       console.log("data----------" , data);

    const seatingArea = document.querySelector(".seating-area");
    // definig contants 
        const rows = Math.ceil(totalSeats / seatsPerRow );
        const mid = Math.ceil(seatsPerRow / 2);

        createClassroom(rows, seatsPerRow, mid, totalSeats, data.bookedSeats,data.selectedSeat,  seatingArea)
    }


   function createClassroom(rows, seatsPerRow, mid, totalSeats, bookedSeats , selectedSeat , seatingArea){
console.log(bookedSeats);

    for (let row = 1; row <= rows; row++) {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('row');

        for (let seat = 1; seat <= seatsPerRow; seat++) {
   
        if (seat === mid + 1 ) {
            const gapDiv = document.createElement('div');
            gapDiv.classList.add('middle-gap');
            rowDiv.appendChild(gapDiv);
        }

        if (seatNumber <= totalSeats) {
                const seatDiv = document.createElement('div');
                seatDiv.classList.add('seat');
                seatDiv.textContent = `s-${seatNumber}`;
                seatDiv.setAttribute("data-seat-number" , seatNumber);
                rowDiv.appendChild(seatDiv);
                seatNumber++;
            
                // for booked seats
                if(bookedSeats.includes(seatNumber)){
                  seatDiv.classList.add('booked');
                }
                if(selectedSeat === seatNumber){
                  console.log("YES-------")
                  seatDiv.classList.add('selected-seat');
                  seatDiv.style.pointerEvents = 'none';
                  
                }

            }
        }
        seatingArea.appendChild(rowDiv);
    }
   
   }

    // Function to create a middle gap div
  function createMiddleGap() {
    const gapDiv = document.createElement("div");
    gapDiv.classList.add("middle-gap");
    return gapDiv;
  }

 
  // for selecting and deselecting the seats

    // Function to handle seat selection
  function selectSeat(seat) {
    // Deselect the previously selected seat if it exists
    if (selectedSeat) {
      updateSeatState(selectedSeat, false);
    }

    // Select the current seat
    updateSeatState(seat, true);
    selectedSeat = seat;
  }

  // Function to update the visual state of a seat
  function updateSeatState(seat, isSelected) {
    if (isSelected) {
      seat.classList.add('selected-seat');
    } else {
      seat.classList.remove('selected-seat');
    }
  }

document.addEventListener("DOMContentLoaded", initBookingPage);
  </script>